function VanillaLib(){"use strict";let self={version:"1.2.180626.2126",logging:!0,logGroup:function(){return!!self.logging&&console.groupCollapsed.apply(console,arguments)},logEnd:function(){return!!self.logging&&console.groupEnd.apply(console,arguments)},time:function(){return!!self.logging&&console.time.apply(console,arguments)},timeEnd:function(){return!!self.logging&&console.timeEnd.apply(console,arguments)},warn:function(){return!!self.logging&&console.warn.apply(console,arguments)},log:function(){return!!self.logging&&console.debug.apply(console,arguments)},ownsIt:(obj,prop)=>!!prop&&self.isobj(obj,!0)&&obj.hasOwnProperty(prop),hasval:expr=>null!=expr,ifndef:(expr,value)=>self.ndef(expr)?value:expr,ifnan:(expr,value)=>isNaN(expr)?value:expr,isarr:expr=>self.isobj(expr,Array),isstr:expr=>"string"==typeof expr,isfn:expr=>"function"==typeof expr,ndef:expr=>void 0===expr,mapFlat:(array,func)=>array.map(x=>func(x)).reduce((a,b)=>a.concat(b)),ispojo:expr=>self.isobj(expr,Object),test:(expr,func,other)=>expr?func(expr):self.isfn(other)?other(expr):other,toArray:expr=>Array.slice(expr),parenth:(elem,nth)=>traverse(elem,self.ifndef(nth,1),0),$$:(sel,elem)=>Array.slice((elem||document).querySelectorAll(sel)),$:(sel,elem)=>(elem||document).querySelector(sel),aggRate:(amount,rate,periods)=>periods?self.aggRate(amount*rate,rate,periods-1):amount,toDec:expr=>Math.round(100*parseFloat((expr+"").replace(/\$|,/g,"")))/100,secondsIn:(from,to,other)=>self.ifnan((to-from)/1e3,self.ifndef(other,NaN)),minutesIn:(from,to,other)=>self.ifnan((to-from)/6e4,self.ifndef(other,NaN)),hoursIn:(from,to,other)=>self.ifnan((to-from)/36e5,self.ifndef(other,NaN)),daysIn:(from,to,other)=>self.ifnan((to-from)/864e5,self.ifndef(other,NaN)),secondsSince:(from,other)=>self.secondsIn(from,Date.now(),other),minutesSince:(from,other)=>self.minutesIn(from,Date.now(),other),hoursSince:(from,other)=>self.hoursIn(from,Date.now(),other),daysSince:(from,other)=>self.daysIn(from,Date.now(),other),addClass:function(element,name){return!(!element||!name)&&(self.isarr(element)?element.map(elem=>self.addClass(elem,name)):(name=(name=self.isarr(name)?name:name.split(",")).map(nm=>nm.trim()).filter(nm=>!element.classList.contains(nm)),element.className=(element.className+" "+name.join(" ")).trim(),!0))},appendTo:function(element,parent,reference){return reference&&(parent=reference.parentNode,reference=reference.nextSibling),reference?self.prependTo(element,parent,reference):(parent?parent.append(element):self.warn("*** appendTo() could not add element: No parent or reference element provided"),element)},attr:function(elem,name,value){return self.isarr(elem)?elem.map(el=>self.attr(el,name,value)):(self.keysAndValues(name,value,(n,v)=>null===v?elem.removeAttribute(n):elem.setAttribute(n,v)),elem)},choose:function(index,values){return Array.slice(arguments)[index]},create:function(html,containerType){let container=null,result=null,attrs,style;return self.isobj(containerType)&&(attrs=containerType.attrs,style=containerType.style,containerType=containerType.container),containerType=containerType||"div",create[containerType]=container=self.create[containerType]||document.createElement(containerType),container.innerHTML=html,result=Array.slice(container.childNodes).map(elem=>(elem.remove(),elem)),attrs&&self.attr(result,attrs),style&&self.css(result,style),1==result.length&&(result=result[0]),result},createXHR:function(){let xhr=new XMLHttpRequest;return xhr.onabort=function(ev,xhr){self.log("XHR Abort:",ev,xhr,this)},xhr.onerror=function(ev,xhr){self.log("XHR Error:",ev,xhr,this)},xhr.onload=function(ev,xhr){self.log("XHR Load:",ev,xhr,this)},self.on(xhr,{abort:function(ev){self.isfn(this.onabort)&&this.onabort(ev,this)},error:function(ev){self.isfn(this.onerror)&&this.onerror(ev,this)},load:function(ev){self.isfn(this.onload)&&this.onload(ev,this)}}),xhr},css:function(element,key,value){return isarr(element)?element.map(el=>css(el,key,value)):(keysAndValues(key,value,(k,v)=>element.style[k]=v),element)},extend:function(target,sources){for(let i=1,n=arguments.length;i<n;i++)self.isobj(arguments[i],!0)&&self.copyMembers(arguments[i],target);return target},fire:function(elem,event,args){return self.isstr(event)&&(args=self.ifndef(args,{bubbles:!0,cancelable:!0}),event=new Event(event,args)),elem.dispatchEvent(event)},isobj:function(expr,type){return"object"==typeof expr&&(!0===type?null!==expr:self.isfn(type)?type===expr.constructor:!self.isstr(type)||!!expr.constructor&&type===expr.constructor.name)},keysAndValues:function(key,value,action){return self.ndef(action)&&self.isfn(value)&&(action=value,value=void 0),self.isobj(key)&&!value?Object.keys(key).map(k=>action(k,key[k])):self.isarr(key)?self.isarr(value)&&key.length===value.length?key.map((k,i)=>action(k,value[i])):key.map(k=>action(k,value)):action(key,value)},localJson:function(key,value){if(key&&self.isstr(key))try{return self.ndef(value)?JSON.parse(localStorage.getItem(key)):null===value?localStorage.removeItem(key):localStorage.setItem(key,JSON.stringify(value))}catch(error){self.warn("* localJson() error:",error,"\n\tfor:",key,value)}return null},off:function(element,event,callback){return self.ndef(callback)&&self.isobj(event)?self.keysAndValues(event,(k,v)=>self.off(element,k,v)):self.isarr(element)?element.map(elem=>self.off(elem,event,callback)):element.removeEventListener(event,callback)},on:function(element,event,callback){return self.ndef(callback)&&self.isobj(event)?self.keysAndValues(event,(k,v)=>self.on(element,k,v)):self.isarr(element)?element.map(elem=>self.on(elem,event,callback)):element.addEventListener(event,callback)},onmutate:function(element,callback,config){if(element&&self.isfn(callback)){if(config=config||{attributes:!1,childList:!0,subtree:!1},self.isarr(element))return element.map(elem=>self.onmutate(elem,callback,config));let observer=new MutationObserver(callback);return observer.initialConfig=(()=>config),observer.reconnect=function(newConfig){return this.observe(element,newConfig||this.initialConfig()),this},observer.reconnect()}return null},pojo2query:function(pojo){if(self.isobj(pojo)&&pojo){let query;return"?"+Object.keys(pojo).map(key=>escape(key)+"="+escape(pojo[key])).join("&")}return null},prependTo:function(element,parent,reference){return!reference&&parent&&(reference=parent.childNodes[0]),reference?reference.parentNode.insertBefore(element,reference):parent?parent.append(element):self.warn("*** prependTo() could not add element: No parent or reference element provided"),element},query2pojo:function(query){if(query=(self.ifndef(query,location.search)+"").replace(/^[?&]+|$&+/g,"")){let segs,key,val,pojo={};return query.split("&").forEach(item=>{[key,val]=segs=item.split("="),val=self.ndef(val)?null:segs.slice(1).join("="),pojo[unescape(key)]=val}),pojo}return null},request:function(url,verb,data,callback){switch(self.log("* request of:",verb,url,data,callback),verb=(verb||"GET").toUpperCase()){case"P":verb="POST";break;case"G":verb="GET";break;case"H":verb="HEAD"}self.ndef(callback)&&self.isfn(data)&&(callback=data,data=null),data=(data=self.ifndef(data,null))&&self.isobj(data)?self.pojo2query(data).replace("?",""):data.toString(),self.log("- request data:",data),"GET"===verb&&data&&(url+=(url.includes("?")?"&":"?")+data,data=null);let xhr=self.createXHR();return self.log("-> opening request:",verb,url),xhr.open(verb,url),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.onabort=xhr.onerror=xhr.onload=callback,self.log("-> sending request:",data,xhr.readyState,xhr),xhr.send(data)},table2json:function(table,headers,filter){if(table&&table.rows){let obj={head:[],data:[]};if(obj.head=self.isfn(headers)?headers(table):table.rows[0],self.isobj(obj.head)&&obj.head.cells&&(obj.head=Array.map(obj.head.cells,th=>th.innerText.trim())),obj.head.length){filter=filter||((row,i)=>i&&"TBODY"===row.parentNode.nodeName);for(let r=0,nr=table.rows.length;r<nr;r++){let row=table.rows[r];if(filter(row,r)){let item={};obj.head.forEach((col,i)=>{col[0]&&(item[col]=row.cells[i].innerText.trim())}),obj.data.push(item)}}}return obj.data}return null},toDec2:function(amount){if(amount=self.toDec(amount),isNaN(amount))return null;let segs=(amount+"").split(".");return segs[0]+"."+((segs[1]||0)+"0").slice(0,2)},toMoney:function(amount){let dec2=self.toDec2(amount);return isNaN(dec2)?null:dec2<0?"-$ "+-dec2:"$ "+dec2},traverse:function(elem,up,sideways,elementsOnly,lastIfNull){let last=elem;for(;elem&&up-- >0;)last=elem,elem=elem.parentNode;let prop=(elementsOnly?"Element":"")+"Sibling";if(sideways<0)for(;elem&&sideways++<0;)last=elem,elem=elem["previous"+prop];else if(sideways>0)for(;elem&&sideways-- >0;)last=elem,elem=elem["next"+prop];return lastIfNull?elem||last:elem},copyMembers:function(source,target,members,preserve){if(!self.isobj(source)||!self.isobj(target))return self.warn("=> Cannot copy from/to non-objects"),!1;let names=Object.keys(source);return preserve=!!self.isobj(preserve)&&preserve,self.isstr(members)&&(members=members.split(",").map(nm=>nm.trim())),self.isarr(members)?names=names.filter(nm=>members.includes(nm)):self.isfn(members)&&(names=names.filter(members)),names.forEach(nm=>{target[nm]&&preserve&&(preserve[nm]=target[nm]),target[nm]=source[nm]}),preserve||target},export:function(scope,members,overwriten){return!!scope&&("*"===(members+"").trim()&&(members=null),self.copyMembers(self,scope,members,overwriten))}};return self}